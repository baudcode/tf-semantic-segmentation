language: python
sudo: required
python:
    - '3.7'

before_install:
  - sudo apt-get install -y libsm6 libxext6 libxrender-dev

install:
    - pip install -r requirements.txt
    - pip install -r tests/requirements.txt
    
cache: pip
script:
    - python setup.py install
    - pytest tests/

deploy:
  provider: pypi
  user: $PYPI_USERNAME
  password: $PYPI_PASSWORD
  skip_existing: true
  on:
    tags: true